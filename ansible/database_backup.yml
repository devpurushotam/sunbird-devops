---
- name: Execute Backup_servers.py and Print Output
  hosts: localhost
  gather_facts: no
  vars:
    ansible_python_interpreter: /usr/bin/python3

  tasks:
    - name: Set Execute Permissions on Python Script
      file:
        path: /opt/scripts/Backup_servers.py
        mode: "+x"

    - name: Install prettytable module
      command: "/usr/bin/python3 -m pip install prettytable"

    - name: Execute Python Script
      command: "/usr/bin/python3 /opt/scripts/Backup_servers.py"
      register: script_output

    - name: Print Script Output in Blue and Bold
      debug:
        msg: "\u001b[1m\u001b[34m{{ script_output.stdout }}\u001b[0m"
